name:   CI pipeline by using github action to build and push DockerImage
on:
        push:
                branches:
                 -      Face-Detection-Minor/docker-compose
jobs:
        build:
                runs-on:        ubuntu-latest
                steps:
                   - name:   checkout code
                     uses:   actions/checkout@v2
                     
                   - name:   Login to Docker Hub
                     uses:   docker/login-action@f4ef78c080cd8ba55a85445d5b36e214a81df20a
                     with:
                             username: ${{ secrets.DOCKER_USERNAME }}
                             password: ${{ secrets.DOCKER_PASSWORD }}
   
                   - name: Extract metadata (tags, labels) for Docker
                     id: meta
                     uses: docker/metadata-action@9ec57ed1fcdbf14dcef7dfbe97b2010124a938b7
                     with:
                             images: 8149080856/devops_21_practice

                   - name: Build and push Docker image
                     uses: docker/build-push-action@v2
                     with:
                             context: .
                             push: true
                             tags: 8149080856/devops_21_practice:updated


